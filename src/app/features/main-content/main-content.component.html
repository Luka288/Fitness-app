<main>
  <div class="base-side">
    <div class="user-container">
      <div class="left-side">
        <div class="image-container">
          <img [src]="user()?.photoURL" [alt]="`${user()?.displayName} Logo`" />
        </div>
        <div class="user-baseInfo">
          <p>
            Username: <span>{{ user()?.displayName }}</span>
          </p>
          <p>
            Email: <span>{{ user()?.email }}</span>
          </p>
          <p>
            Member Since:
            <span>{{
              user()?.metadata?.creationTime | date : "dd/MM/yyyy"
            }}</span>
          </p>
          <p>
            Last seen:
            <span>{{
              user()?.metadata?.lastSignInTime | date : "dd/MM/yyyy"
            }}</span>
          </p>

          <p>
            Email verified:
            <span>{{ user()?.emailVerified ? "Yes" : "No" }}</span>
          </p>
        </div>
      </div>
    </div>
    <div class="workouts-container">
      <div class="container-title">
        <p>choose today's activity</p>
      </div>
      <div class="wrokout-cards">
        <app-card *ngFor="let item of workoutTypes()" [workout]="item" />
      </div>
    </div>

    <div class="user-activites">
      <div class="activities-title">
        <p>Activities</p>
      </div>
      <div class="loading" *ngIf="isLoading()">
        <mat-spinner *ngIf="isLoading()"></mat-spinner>
      </div>
      <div
        class="place-holder"
        *ngIf="activities().length === 0 && !isLoading()"
      >
        <p>no activities found.</p>
      </div>
      <div class="cards">
        @if (!isLoading()) {
        <app-dashboard-card
          *ngFor="let item of activities()"
          [cardInfo]="item"
        />
        }
      </div>
    </div>
  </div>
  <section class="workouts-chart">
    <div class="top-charts">
      <div class="user-meals" [ngClass]="{ hidden: !dailyMeals() }">
        <div class="title-container">
          <p>Macro tracker</p>
        </div>
        <div class="loading" *ngIf="isLoading()">
          <mat-spinner *ngIf="isLoading()"></mat-spinner>
        </div>
        <div class="placeholder" *ngIf="!dailyMeals() && !isLoading()">
          <h5>Add today's meals to view your macro data.</h5>
          <button routerLink="scanner">Add food here!</button>
        </div>
        <app-nutrition-card
          [nutritionInput]="dailyMeals()!"
          *ngIf="dailyMeals() && !isLoading()"
        />
      </div>

      <div class="daily-goal">
        <div class="title-container">
          <p>Daily Goal</p>
        </div>
        <div class="loading" *ngIf="isLoading()">
          <mat-spinner *ngIf="isLoading()"></mat-spinner>
        </div>
        <app-daily-goal
          [goalData]="dailyGoal()"
          (newGoal)="openModal()"
          *ngIf="dailyGoal() && !isLoading()"
        />
        <div class="empty" *ngIf="!dailyGoal() && !isLoading()">
          <span>üèÖNo daily goals found. set your daily goal. </span>
          <button (click)="openModal()">Set daily goal</button>
        </div>
        <app-modal
          *ngIf="isOpen()"
          (close)="closeModal()"
          (saveGoal)="saveDailyGoal($event)"
        />
      </div>
    </div>
    <div
      class="calorie-data"
      [ngClass]="{ hidden: weeklyActivity().length < 7 }"
    >
      <div class="not-available" *ngIf="weeklyActivity().length < 7">
        <h4>
          <i class="fa-solid fa-lock"></i>
          Complete at least 7 workouts to unlock the progress <br />
          chart for the last 7 workouts.
        </h4>
      </div>
      <app-line-chart
        *ngIf="weeklyActivity() && weeklyActivity().length >= 7"
        [userWorkoutData]="weeklyActivity()"
      />
    </div>
  </section>
</main>
